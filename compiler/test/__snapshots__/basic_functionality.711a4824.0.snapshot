basic functionality â€º pattern_match_unsafe_wasm
((mash_code
  ((functions
    (((id ((stamp 1113) (name test))) (name (test))
      (args ((GrainValue GrainClosure)))
      (return_type ((GrainValue GrainI31))) (closure ())
      (body
       (((instr_desc
          (MStore
           (((MLocalBind 0 (GrainValue GrainClosure))
             ((instr_desc
               (MImmediate
                ((immediate_desc (MImmConst MConstVoid))
                 (immediate_analyses ((last_usage Unknown))))))))))))
        ((instr_desc
          (MDrop
           ((instr_desc
             (MCallKnown (func foo_1114)
              (closure
               ((immediate_desc
                 (MImmBinding (MLocalBind 0 (GrainValue GrainClosure))))
                (immediate_analyses ((last_usage Unknown)))))
              (func_type (((WasmValue WasmI32)) ((GrainValue GrainI31))))
              (args
               (((immediate_desc (MImmConst (MConstWasmI32 0)))
                 (immediate_analyses ((last_usage Unknown))))))))))))
        ((instr_desc
          (MDrop
           ((instr_desc
             (MCallKnown (func foo_1114)
              (closure
               ((immediate_desc
                 (MImmBinding (MLocalBind 0 (GrainValue GrainClosure))))
                (immediate_analyses ((last_usage Unknown)))))
              (func_type (((WasmValue WasmI32)) ((GrainValue GrainI31))))
              (args
               (((immediate_desc (MImmConst (MConstWasmI32 1)))
                 (immediate_analyses ((last_usage Unknown))))))))))))
        ((instr_desc
          (MDrop
           ((instr_desc
             (MCallKnown (func foo_1114)
              (closure
               ((immediate_desc
                 (MImmBinding (MLocalBind 0 (GrainValue GrainClosure))))
                (immediate_analyses ((last_usage Unknown)))))
              (func_type (((WasmValue WasmI32)) ((GrainValue GrainI31))))
              (args
               (((immediate_desc (MImmConst (MConstWasmI32 5)))
                 (immediate_analyses ((last_usage Unknown))))))))))))
        ((instr_desc
          (MDrop
           ((instr_desc
             (MCallKnown (func foo_1114)
              (closure
               ((immediate_desc
                 (MImmBinding (MLocalBind 0 (GrainValue GrainClosure))))
                (immediate_analyses ((last_usage Unknown)))))
              (func_type (((WasmValue WasmI32)) ((GrainValue GrainI31))))
              (args
               (((immediate_desc (MImmConst (MConstWasmI32 8)))
                 (immediate_analyses ((last_usage Unknown))))))))))))
        ((instr_desc
          (MReturnCallKnown (func foo_1114)
           (closure
            ((immediate_desc
              (MImmBinding (MLocalBind 0 (GrainValue GrainClosure))))
             (immediate_analyses ((last_usage Unknown)))))
           (func_type (((WasmValue WasmI32)) ((GrainValue GrainI31))))
           (args
            (((immediate_desc (MImmConst (MConstWasmI32 42)))
              (immediate_analyses ((last_usage Unknown)))))))))))
      (stack_size
       ((stack_size_ptr 1) (stack_size_i32 0) (stack_size_i64 0)
        (stack_size_f32 0) (stack_size_f64 0)))
      (attrs (((txt Unsafe)))))
     ((id ((stamp 1114) (name foo))) (name ())
      (args ((GrainValue GrainClosure) (WasmValue WasmI32)))
      (return_type ((GrainValue GrainI31))) (closure ())
      (body
       (((instr_desc
          (MStore
           (((MLocalBind 0 (GrainValue GrainI31))
             ((instr_desc
               (MPrim2
                (WasmBinaryI32 (wasm_op Op_eq_int32)
                 (arg_types (Wasm_int32 Wasm_int32)) (ret_type Grain_bool))
                ((immediate_desc
                  (MImmBinding (MArgBind 1 (WasmValue WasmI32))))
                 (immediate_analyses ((last_usage Unknown))))
                ((immediate_desc (MImmConst (MConstWasmI32 1)))
                 (immediate_analyses ((last_usage Unknown))))))))))))
        ((instr_desc
          (MStore
           (((MLocalBind 1 (GrainValue GrainI31))
             ((instr_desc
               (MIf
                ((immediate_desc
                  (MImmBinding (MLocalBind 0 (GrainValue GrainI31))))
                 (immediate_analyses ((last_usage Unknown))))
                (((instr_desc
                   (MImmediate
                    ((immediate_desc (MImmConst (MConstSimpleNumber 0)))
                     (immediate_analyses ((last_usage Unknown))))))))
                (((instr_desc
                   (MStore
                    (((MLocalBind 2 (GrainValue GrainI31))
                      ((instr_desc
                        (MPrim2
                         (WasmBinaryI32 (wasm_op Op_eq_int32)
                          (arg_types (Wasm_int32 Wasm_int32))
                          (ret_type Grain_bool))
                         ((immediate_desc
                           (MImmBinding (MArgBind 1 (WasmValue WasmI32))))
                          (immediate_analyses ((last_usage Unknown))))
                         ((immediate_desc (MImmConst (MConstWasmI32 2)))
                          (immediate_analyses ((last_usage Unknown))))))))))))
                 ((instr_desc
                   (MIf
                    ((immediate_desc
                      (MImmBinding (MLocalBind 2 (GrainValue GrainI31))))
                     (immediate_analyses ((last_usage Unknown))))
                    (((instr_desc
                       (MImmediate
                        ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                         (immediate_analyses ((last_usage Unknown))))))))
                    (((instr_desc
                       (MStore
                        (((MLocalBind 3 (GrainValue GrainI31))
                          ((instr_desc
                            (MPrim2
                             (WasmBinaryI32 (wasm_op Op_eq_int32)
                              (arg_types (Wasm_int32 Wasm_int32))
                              (ret_type Grain_bool))
                             ((immediate_desc
                               (MImmBinding (MArgBind 1 (WasmValue WasmI32))))
                              (immediate_analyses ((last_usage Unknown))))
                             ((immediate_desc (MImmConst (MConstWasmI32 3)))
                              (immediate_analyses ((last_usage Unknown))))))))))))
                     ((instr_desc
                       (MIf
                        ((immediate_desc
                          (MImmBinding (MLocalBind 3 (GrainValue GrainI31))))
                         (immediate_analyses ((last_usage Unknown))))
                        (((instr_desc
                           (MImmediate
                            ((immediate_desc
                              (MImmConst (MConstSimpleNumber 2)))
                             (immediate_analyses ((last_usage Unknown))))))))
                        (((instr_desc
                           (MStore
                            (((MLocalBind 4 (GrainValue GrainI31))
                              ((instr_desc
                                (MPrim2
                                 (WasmBinaryI32 (wasm_op Op_eq_int32)
                                  (arg_types (Wasm_int32 Wasm_int32))
                                  (ret_type Grain_bool))
                                 ((immediate_desc
                                   (MImmBinding
                                    (MArgBind 1 (WasmValue WasmI32))))
                                  (immediate_analyses ((last_usage Unknown))))
                                 ((immediate_desc
                                   (MImmConst (MConstWasmI32 4)))
                                  (immediate_analyses ((last_usage Unknown))))))))))))
                         ((instr_desc
                           (MIf
                            ((immediate_desc
                              (MImmBinding
                               (MLocalBind 4 (GrainValue GrainI31))))
                             (immediate_analyses ((last_usage Unknown))))
                            (((instr_desc
                               (MImmediate
                                ((immediate_desc
                                  (MImmConst (MConstSimpleNumber 3)))
                                 (immediate_analyses ((last_usage Unknown))))))))
                            (((instr_desc
                               (MStore
                                (((MLocalBind 5 (GrainValue GrainI31))
                                  ((instr_desc
                                    (MPrim2
                                     (WasmBinaryI32 (wasm_op Op_eq_int32)
                                      (arg_types (Wasm_int32 Wasm_int32))
                                      (ret_type Grain_bool))
                                     ((immediate_desc
                                       (MImmBinding
                                        (MArgBind 1 (WasmValue WasmI32))))
                                      (immediate_analyses
                                       ((last_usage Unknown))))
                                     ((immediate_desc
                                       (MImmConst (MConstWasmI32 5)))
                                      (immediate_analyses
                                       ((last_usage Unknown))))))))))))
                             ((instr_desc
                               (MIf
                                ((immediate_desc
                                  (MImmBinding
                                   (MLocalBind 5 (GrainValue GrainI31))))
                                 (immediate_analyses ((last_usage Unknown))))
                                (((instr_desc
                                   (MImmediate
                                    ((immediate_desc
                                      (MImmConst (MConstSimpleNumber 4)))
                                     (immediate_analyses
                                      ((last_usage Unknown))))))))
                                (((instr_desc
                                   (MStore
                                    (((MLocalBind 6 (GrainValue GrainI31))
                                      ((instr_desc
                                        (MPrim2
                                         (WasmBinaryI32 (wasm_op Op_eq_int32)
                                          (arg_types (Wasm_int32 Wasm_int32))
                                          (ret_type Grain_bool))
                                         ((immediate_desc
                                           (MImmBinding
                                            (MArgBind 1 (WasmValue WasmI32))))
                                          (immediate_analyses
                                           ((last_usage Unknown))))
                                         ((immediate_desc
                                           (MImmConst (MConstWasmI32 6)))
                                          (immediate_analyses
                                           ((last_usage Unknown))))))))))))
                                 ((instr_desc
                                   (MIf
                                    ((immediate_desc
                                      (MImmBinding
                                       (MLocalBind 6 (GrainValue GrainI31))))
                                     (immediate_analyses
                                      ((last_usage Unknown))))
                                    (((instr_desc
                                       (MImmediate
                                        ((immediate_desc
                                          (MImmConst (MConstSimpleNumber 5)))
                                         (immediate_analyses
                                          ((last_usage Unknown))))))))
                                    (((instr_desc
                                       (MImmediate
                                        ((immediate_desc
                                          (MImmConst (MConstSimpleNumber 6)))
                                         (immediate_analyses
                                          ((last_usage Unknown))))))))))))))))))))))))))))))))))))
        ((instr_desc
          (MSwitch
           ((immediate_desc
             (MImmBinding (MLocalBind 1 (GrainValue GrainI31))))
            (immediate_analyses ((last_usage Unknown))))
           ((0
             (((instr_desc
                (MStore
                 (((MLocalBind 7 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainVariant) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 7 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown)))))))))))
            (1
             (((instr_desc
                (MStore
                 (((MLocalBind 8 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainVariant) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc (MImmConst (MConstSimpleNumber 2)))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 8 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown)))))))))))
            (2
             (((instr_desc
                (MStore
                 (((MLocalBind 9 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainVariant) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 9 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown)))))))))))
            (3
             (((instr_desc
                (MStore
                 (((MLocalBind 10 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainVariant) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc (MImmConst (MConstSimpleNumber 4)))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 10 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown)))))))))))
            (4
             (((instr_desc
                (MStore
                 (((MLocalBind 11 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainVariant) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc (MImmConst (MConstSimpleNumber 5)))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 11 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown)))))))))))
            (5
             (((instr_desc
                (MStore
                 (((MLocalBind 12 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainVariant) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc (MImmConst (MConstSimpleNumber 6)))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 12 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown)))))))))))
            (6
             (((instr_desc
                (MStore
                 (((MLocalBind 13 (GrainValue GrainVariant))
                   ((instr_desc
                     (MAllocate
                      (MADT
                       ((immediate_desc
                         (MImmConst (MConstSimpleNumber 250551095)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 3)))
                        (immediate_analyses ((last_usage Unknown))))
                       ((immediate_desc (MImmConst (MConstSimpleNumber 1)))
                        (immediate_analyses ((last_usage Unknown))))
                       ())))))))))
              ((instr_desc
                (MStore
                 (((MLocalBind 14 (GrainValue GrainString))
                   ((instr_desc (MAllocate (MString other)))))))))
              ((instr_desc
                (MReturnCallKnown (func print_1125)
                 (closure
                  ((immediate_desc
                    (MImmBinding
                     (MGlobalBind print_1125 (GrainValue GrainClosure))))
                   (immediate_analyses ((last_usage Unknown)))))
                 (func_type
                  (((GrainValue GrainString) (GrainValue GrainVariant))
                   ((GrainValue GrainI31))))
                 (args
                  (((immediate_desc
                     (MImmBinding (MLocalBind 14 (GrainValue GrainString))))
                    (immediate_analyses ((last_usage Unknown))))
                   ((immediate_desc
                     (MImmBinding (MLocalBind 13 (GrainValue GrainVariant))))
                    (immediate_analyses ((last_usage Unknown))))))))))))
           (((instr_desc
              (MImmediate
               ((immediate_desc MImmTrap)
                (immediate_analyses ((last_usage Unknown))))))))
           (GrainValue GrainI31))))))
      (stack_size
       ((stack_size_ptr 15) (stack_size_i32 0) (stack_size_i64 0)
        (stack_size_f32 0) (stack_size_f64 0)))
      (attrs (((txt Unsafe)))))))
   (imports
    (((mimp_id ((stamp 1125) (name print))) (mimp_mod pervasives.gr)
      (mimp_name print)
      (mimp_type
       (MFuncImport
        ((GrainValue GrainClosure) (WasmValue WasmRef) (WasmValue WasmRef))
        ((GrainValue GrainI31))))
      (mimp_kind MImportGrain) (mimp_setup MSetupNone) (mimp_used true))
     ((mimp_id ((stamp 1125) (name print))) (mimp_mod pervasives.gr)
      (mimp_name print)
      (mimp_type (MGlobalImport (GrainValue GrainClosure) true))
      (mimp_kind MImportGrain) (mimp_setup MCallGetter) (mimp_used true))))
   (exports ())
   (main_body
    (((instr_desc
       (MStore
        (((MGlobalBind test_1113 (GrainValue GrainClosure))
          ((instr_desc
            (MImmediate
             ((immediate_desc (MImmConst MConstVoid))
              (immediate_analyses ((last_usage Unknown))))))))))))
     ((instr_desc
       (MReturnCallKnown (func test_1113)
        (closure
         ((immediate_desc
           (MImmBinding (MGlobalBind test_1113 (GrainValue GrainClosure))))
          (immediate_analyses ((last_usage Unknown)))))
        (func_type (() ((GrainValue GrainI31)))) (args ()))))))
   (main_body_stack_size
    ((stack_size_ptr 0) (stack_size_i32 0) (stack_size_i64 0)
     (stack_size_f32 0) (stack_size_f64 0)))
   (globals
    (((id ((stamp 1113) (name test))) (mutable_ true)
      (allocation_type (GrainValue GrainClosure)) (initial_value ()))))
   (compilation_mode Normal) (type_metadata <opaque>)))
 (signature <opaque>))
